{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "artifact.v0.1",
  "title": "artifact.v0.1",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema_version", "artifact_id", "media_type"],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "artifact.v0.1"
    },
    "artifact_id": {
      "type": "string",
      "description": "Stable identifier for the artifact. May be a UUID or content-addressed digest (e.g., sha256:<hex>).",
      "minLength": 1
    },
    "media_type": {
      "type": "string",
      "description": "IANA media type (MIME type), e.g., application/json, text/plain, application/pdf.",
      "minLength": 1
    },
    "locator": {
      "type": "string",
      "description": "Optional location hint (file path, URL, MCP resource key). Not required for determinism.",
      "minLength": 1
    },
    "size_bytes": {
      "type": "integer",
      "description": "Optional size in bytes.",
      "minimum": 0
    },
    "digest": {
      "type": "object",
      "description": "Optional integrity digest(s).",
      "additionalProperties": false,
      "properties": {
        "alg": {
          "type": "string",
          "description": "Digest algorithm. sha256 is recommended.",
          "enum": ["sha256", "sha512", "blake3"]
        },
        "value": {
          "type": "string",
          "description": "Hex digest value (lowercase recommended).",
          "pattern": "^[0-9a-fA-F]+$",
          "minLength": 16
        }
      },
      "required": ["alg", "value"]
    },
    "labels": {
      "type": "object",
      "description": "Optional small labels for consumers (e.g., role=cli_error_json).",
      "additionalProperties": {
        "type": "string",
        "maxLength": 200
      }
    }
  }
}
